containers:
  docs_container:
    docker: gcr.io/shopify-docker-images/apps/production/apidocs-generator-alpine:production

steps:
  - label: üìù Assemble docs
    git:
      history: shallow
    timeout: 5m
    run:
      # this is not recommended, but necessary since our repo uses turborepo.
      # see the disclaimer here: https://turbo.build/repo/docs/getting-started/existing-monorepo#install-turbo
      - apk add --no-cache libc6-compat
      - cd /projects/api-node && ./assemble --type=docs --microsite-root=/docusaurus
    container: docs_container
